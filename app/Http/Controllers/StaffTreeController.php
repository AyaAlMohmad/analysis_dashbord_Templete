<?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;

class StaffTreeController extends Controller
{
    private $projects;
    
    public function __construct() {
        $this->projects = [
            [
                'name' => 'مشروع ازيان نمار',
                'manager' => 'اصيل السلمي',
                'manager_title' => 'مدير علاقة (مكلف بإدارة التسليم)',
                'employees' => [
                    'متعب العجمي',
                    'إبراهيم الدوسري', 
                    'عبد الرحمن العمودي',
                    'نواف القحطاني',
                    'محمد الشهري',
                    'نايف الهمامي'
                ],
                'service_title' => 'خدمة عملاء ما بعد البيع',
                'departments' => ['ادارة الكيان', 'ادارة التطوير الشامل'],
                'total_employees' => 7
            ],
            [
                'name' => 'مشروع ازيان خزام',
                'positions' => [
                    'المدير التنفيذي للمبيعات' => ['فهد عطرجي'],
                    'مسؤول دعم المبيعات' => ['عمار النجار'],
                    'مدير المبيعات الهاتفية' => ['مشاعل الشهراني'],
                    'مشرف المبيعات' => ['طارق عاروده (لم تتم المباشرة)'],
                    'مبيعات هاتفية' => ['بشرى الغبيوي', 'رغد المسعري', 'رهف العريفي'],
                    'استشاري مبيعات' => ['عبد الله العمودي', 'عبد الرحمن باسرده', 'عيسى العبسي', 'عبد الله المضيان']
                ],
                'departments' => ['ادارة الكيان', 'ادارة التطوير الشامل'],
                'total_employees' => 10,
                'current_employees' => true
            ],
            [
                'name' => 'مشروع ازيان الفرسان',
                'status' => 'لم يتم الإطلاق',
                'positions' => [
                    'المدير التنفيذي للمبيعات' => ['فهد عطرجي'],
                    'مدير المبيعات الهاتفية' => ['شاغر'],
                    'مشرف المبيعات' => ['شاغر'],
                    'مبيعات هاتفية' => ['شاغر', 'شاغر', 'شاغر'],
                    'استشاري مبيعات' => ['شاغر', 'شاغر', 'شاغر'],
                    'منسق عقود المبيعات' => ['شاغر']
                ],
                'departments' => ['ادارة الكيان', 'ادارة التطوير الشامل'],
                'total_employees' => 1
            ],
            [
                'name' => 'مشروع ازيان بريدة',
                'positions' => [
                    'المدير التنفيذي للمبيعات' => ['فهد عطرجي'],
                    'منسق عقود المبيعات' => ['شاغر'],
                    'مبيعات هاتفية' => ['امل الحربي', 'ابتسام الذياب', 'نوف الحبرتي'],
                    'مدير المبيعات الهاتفية' => ['شاغر'],
                    'مشرف المبيعات' => ['احمد الحربي (لم تتم المباشرة)'],
                    'استشاري مبيعات' => ['فيصل المضيان', 'ندى', 'محمد العشري']
                ],
                'departments' => ['ادارة الكيان', 'ادارة التطوير الشامل'],
                'total_employees' => 8
            ],
            [
                'name' => 'مشروع ازيان هضبة',
                'positions' => [
                    'المدير التنفيذي للمبيعات' => ['فهد عطرجي'],
                    'مبيعات هاتفية' => ['شيم الغامدي', 'روان السعدي', 'هتون ابراهيم'],
                    'مدير المبيعات الهاتفية' => ['سهى الفريدي'],
                    'مشرف المبيعات' => ['منصور بن فريج'],
                    'استشاري مبيعات' => ['محمد الشمراني', 'احمد مشاط', 'احمد الجاوي', 'ربى الغامدي', 'ممدوح المطيري'],
                    'منسق عقود المبيعات' => ['براء النجار']
                ],
                'departments' => ['ادارة التطوير الشامل', 'ادارة الكيان'],
                'total_employees' => 12
            ],
            [
                'name' => 'مشروع ازيان جدة',
                'positions' => [
                    'المدير التنفيذي للمبيعات' => ['فهد عطرجي'],
                    'مبيعات هاتفية' => ['احلام الزهراني (لم تتم المباشرة)', 'ريم الزهراني', 'فرح الشهري (لم تتم المباشرة)'],
                    'مدير المبيعات الهاتفية' => ['شاغر'],
                    'مشرف المبيعات' => ['وليد بن شحبل'],
                    'استشاري مبيعات' => ['شاغر', 'احمد الجاوي', 'محمد الشمراني', 'شاغر', 'شاغر'],
                    'منسق عقود المبيعات' => ['شاغر']
                ],
                'departments' => ['ادارة التطوير الشامل', 'ادارة الكيان'],
                'total_employees' => 5,
                'current_employees' => true
            ],
            [
                'name' => 'مشروع ازيان البشاير',
                'positions' => [
                    'المدير التنفيذي للمبيعات' => ['فهد عطرجي'],
                    'مبيعات هاتفية' => ['رزان الاصبحي (لم تتم المباشرة)', 'منار السلمي', 'وفاء عسيري (لم تتم المباشرة)'],
                    'مدير المبيعات الهاتفية' => ['شاغر'],
                    'مشرف المبيعات' => ['شاغر'],
                    'استشاري مبيعات' => ['شاغر', 'شاغر', 'شاغر', 'شاغر', 'شاغر'],
                    'منسق عقود المبيعات' => ['شاغر']
                ],
                'departments' => ['ادارة التطوير الشامل', 'ادارة الكيان'],
                'total_employees' => 2,
                'current_employees' => true
            ],
            [
                'name' => 'مشروع ازيان الظهران',
                'positions' => [
                    'المدير التنفيذي للمبيعات' => ['فهد عطرجي'],
                    'مبيعات هاتفية' => ['اريج كركدان (لم تتم المباشرة)', 'رهف الغامدي', 'لمى السليماني (لم تتم المباشرة)', 'شاغر', 'شاغر'],
                    'مدير المبيعات الهاتفية' => ['شاغر'],
                    'مشرف المبيعات' => ['شاغر'],
                    'استشاري مبيعات' => ['ناصر المالكي', 'شاغر', 'شاغر', 'عبد الرحمن اليامي', 'شاغر']
                ],
                'departments' => ['ادارة التطوير الشامل', 'ادارة الكيان'],
                'total_employees' => 4,
                'current_employees' => true
            ]
        ];
    }
    
    public function index() {
        return view('staff_tree.index', [
            'projects' => $this->projects,
            'totalEmployees' => $this->getTotalEmployees()
        ]);
    }
    
    private function getTotalEmployees() {
        $total = 0;
        foreach ($this->projects as $project) {
            $total += $project['total_employees'];
        }
        return $total;
    }
}